var monthPicker={year:0,month:0,elementId:0,elementVal:0,pickerHtml:'<div id="ui-monthpicker-body"><div id="ui-monthpicker-top"><div id="ui-monthpicker-prev"></div><div id="ui-monthpicker-year"></div><input type="hidden" id="ui-monthpicker-year-val" value=""/><div id="ui-monthpicker-next"></div></div><div id="ui-monthpicker-con"><ul><li><p class="ui-monthpicker-value" id="ui-month-1">1月</p><p class="ui-monthpicker-value" id="ui-month-2">2月</p><p class="ui-monthpicker-value" id="ui-month-3">3月</p><p class="ui-monthpicker-value" id="ui-month-4">4月</p></li><li><p class="ui-monthpicker-value" id="ui-month-5">5月</p><p class="ui-monthpicker-value" id="ui-month-6">6月</p><p class="ui-monthpicker-value" id="ui-month-7">7月</p><p class="ui-monthpicker-value" id="ui-month-8">8月</p></li><li><p class="ui-monthpicker-value" id="ui-month-9">9月</p><p class="ui-monthpicker-value" id="ui-month-10">10月</p><p class="ui-monthpicker-value" id="ui-month-11">11月</p><p class="ui-monthpicker-value" id="ui-month-12">12月</p></li></ul></div><div id="ui-monthpicker-footer"><p id="ui-monthpicker-now">现在</p><p id="ui-monthpicker-finish">完成</p></div></div>',init:function(){if($("#ui-monthpicker-body").length==0){$("body").append(monthPicker.pickerHtml)}if($(":focus").length==0){return false}var g=$(":focus");elementId=g.attr("id");elementVal=$("#"+elementId).val();$("#ui-monthpicker-body").attr("class","");$("#ui-monthpicker-body").addClass(elementId);itemReg=/^[0-9]{4}-[0-9]{2}$/;if(elementVal&&itemReg.test(elementVal)){var f=elementVal.split("-");monthPicker.year=parseFloat(f[0]);monthPicker.month=parseFloat(f[1])}else{var c=new Date();monthPicker.year=c.getFullYear();monthPicker.month=c.getMonth()+1}$("#ui-monthpicker-year-val").val(monthPicker.year);$("#ui-monthpicker-year").text(monthPicker.year+"年");$(".ui-monthpicker-value").removeClass("ui-monthpicker-choose");$("#ui-month-"+monthPicker.month).addClass("ui-monthpicker-choose");monthPicker.setValue();var b=$("#"+elementId).height();var e=$("#"+elementId).offset().left;var d=$("#"+elementId).offset().top+b+15;var a=$(document).height();var h=250;if(a<d+h){d=d-250}$("#ui-monthpicker-body").css({"left":e,"top":d}).show()},setValue:function(){var a=$("#ui-monthpicker-year-val").val();var b=$(".ui-monthpicker-choose").text();b=b.substr(0,b.length-1);if(b<10){b="0"+b}$("#"+elementId).val(a+"-"+b);$("#"+elementId).focus()}};$(document).on("mouseover","#ui-monthpicker-body",function(){$(this).addClass("ui-monthpicker-mouseover")});$(document).on("mouseout","#ui-monthpicker-body",function(){$(this).removeClass("ui-monthpicker-mouseover")});$(document).on({mousedown:function(){if($(".ui-monthpicker-mouseover").length==0){$("#ui-monthpicker-body").hide()}}});$(document).on("click",".ui-monthpicker-value",function(){$(".ui-monthpicker-value").removeClass("ui-monthpicker-choose");$(this).addClass("ui-monthpicker-choose");monthPicker.setValue()});$(document).on("click","#ui-monthpicker-prev",function(){var b=parseFloat($("#ui-monthpicker-year-val").val());var a=b-1;if(a<2000){a=2000}$("#ui-monthpicker-year-val").val(a);$("#ui-monthpicker-year").text(a+"年");if($(".ui-monthpicker-choose").length==0){$("#ui-month-1").addClass("ui-monthpicker-choose")}monthPicker.setValue()});$(document).on("click","#ui-monthpicker-next",function(){var b=parseFloat($("#ui-monthpicker-year-val").val());var a=b+1;$("#ui-monthpicker-year-val").val(a);$("#ui-monthpicker-year").text(a+"年");if($(".ui-monthpicker-choose").length==0){$("#ui-month-1").addClass("ui-monthpicker-choose")}monthPicker.setValue()});$(document).on("click","#ui-monthpicker-now",function(){var c=new Date();var a=c.getFullYear();var b=c.getMonth()+1;$("#ui-monthpicker-year-val").val(a);$("#ui-monthpicker-year").text(a+"年");$(".ui-monthpicker-value").removeClass("ui-monthpicker-choose");$("#ui-month-"+b).addClass("ui-monthpicker-choose");monthPicker.setValue()});$(document).on("click","#ui-monthpicker-finish",function(){$("#ui-monthpicker-body").hide()});